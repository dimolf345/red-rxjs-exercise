"use strict";(self.webpackChunkred_rxjs_exercise=self.webpackChunkred_rxjs_exercise||[]).push([[647],{7647:(B,f,a)=>{a.r(f),a.d(f,{BooksModule:()=>M});var p=a(6814),s=a(4445),d=a(5861),i=a(95),u=a(5619),m=a(590),o=a(5879),_=a(2187),g=a(5597);function k(n,c){1&n&&(o.TgZ(0,"h2",25),o._uU(1," Add new book to Library "),o.qZA())}function v(n,c){1&n&&(o.TgZ(0,"h2",25),o._uU(1,"Edit Book"),o.qZA())}function Z(n,c){1&n&&(o.TgZ(0,"p",26),o._uU(1," Field is required "),o.qZA())}function C(n,c){1&n&&(o.TgZ(0,"p",26),o._uU(1," Field is required "),o.qZA())}let h=(()=>{var n;class c{constructor(t,e,l){this._route=t,this.Router=e,this.bookService=l,this.coverImg="",this.atlText="",this.bookId=new u.X(""),this.leftIcon=m.acZ,this.book=new u.X(null)}ngOnInit(){var t=this;this._route.params.subscribe(e=>{e.id&&this.bookId.next(e.id)}),this.bookService.initBookService().then(()=>{var e;this.bookId.subscribe(function(l){return(e=e||(0,d.Z)(function*(b){t.book.next(yield t.bookService.findBook(b))})).apply(this,arguments)})}),this.createForm()}createForm(){var t=this;return(0,d.Z)(function*(){t.newBookForm=new i.cw({title:new i.NI("",[i.kI.required]),author:new i.NI("",i.kI.required),pubblicationYear:new i.NI("",[i.kI.pattern(/^[12]?\d{3}$/)]),description:new i.NI(""),imageUrl:new i.NI("",{updateOn:"blur"}),pages:new i.NI(1,[i.kI.min(1)])}),t.newBookForm.get("imageUrl")?.valueChanges.subscribe(e=>{t.atlText=t.newBookForm.get("title")?.value?t.newBookForm.get("title")?.value+" cover":"",t.coverImg=e}),t.book.subscribe(e=>{e&&t.newBookForm.patchValue({title:e.title,author:e.author,pages:e.pages,pubblicationYear:e.pubblicationYear,description:e.description,imageUrl:e.imageUrl})})})()}onSubmit(){var t=this;return(0,d.Z)(function*(){let e;e=t.book.value?yield t.bookService.updateBook(t.book.value,t.newBookForm.value):yield t.bookService.addBook(t.newBookForm.value),e?t.Router.navigate([""]):alert("Book not added")})()}}return(n=c).\u0275fac=function(t){return new(t||n)(o.Y36(s.gz),o.Y36(s.F0),o.Y36(_.Z))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-books"]],decls:41,vars:10,consts:[["aria-label","add new book",1,"form",3,"formGroup","ngSubmit"],["routerLink","",1,"go-back","btn","btn--primary"],[1,"sr-only"],[3,"icon"],["class","form__title",4,"ngIf","ngIfElse"],["editTitle",""],[1,"form__control"],["for","title"],["type","text","id","title","formControlName","title",1,"btn"],["class","error",4,"ngIf"],["for","author"],["type","text","id","author","formControlName","author",1,"btn"],["for","pages"],["type","number","id","pages","formControlName","pages",1,"btn"],["for","pubblicationYear"],["type","text","id","pubblicationYear","placeholder","example: 2019","formControlName","pubblicationYear",1,"btn"],[1,"form__control","form__control--column"],["for","description"],["id","description","rows","4","formControlName","description",1,"btn"],["for","imageUrl"],["type","text","id","imageUrl","formControlName","imageUrl",1,"btn"],[1,"form__submit"],[1,"cover-preview",3,"ngClass"],[3,"src","alt"],["type","submit",1,"btn","btn--primary",3,"disabled"],[1,"form__title"],[1,"error"]],template:function(t,e){if(1&t&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return e.onSubmit()}),o.TgZ(1,"a",1)(2,"span",2),o._uU(3,"Go to home"),o.qZA(),o._UZ(4,"fa-icon",3),o.qZA(),o.YNc(5,k,2,0,"h2",4),o.YNc(6,v,2,0,"ng-template",null,5,o.W1O),o.TgZ(8,"div",6)(9,"label",7),o._uU(10,"Title"),o.qZA(),o._UZ(11,"input",8),o.YNc(12,Z,2,0,"p",9),o.qZA(),o.TgZ(13,"div",6)(14,"label",10),o._uU(15,"Author"),o.qZA(),o._UZ(16,"input",11),o.YNc(17,C,2,0,"p",9),o.qZA(),o.TgZ(18,"div",6)(19,"label",12),o._uU(20,"Pages"),o.qZA(),o._UZ(21,"input",13),o.qZA(),o.TgZ(22,"div",6)(23,"label",14),o._uU(24,"Pubblication Year"),o.qZA(),o._UZ(25,"input",15),o.qZA(),o.TgZ(26,"div",16)(27,"label",17),o._uU(28,"Description"),o.qZA(),o._UZ(29,"textarea",18),o.qZA(),o.TgZ(30,"div",16)(31,"label",19),o._uU(32,"Image url"),o.qZA(),o._UZ(33,"input",20),o.qZA(),o.TgZ(34,"div",21)(35,"div",22)(36,"span"),o._uU(37,"Image preview will be displayed here"),o.qZA(),o._UZ(38,"img",23),o.qZA(),o.TgZ(39,"button",24),o._uU(40," Save book "),o.qZA()()()),2&t){const l=o.MAs(7);o.Q6J("formGroup",e.newBookForm),o.xp6(4),o.Q6J("icon",e.leftIcon),o.xp6(1),o.Q6J("ngIf",!e.bookId.value)("ngIfElse",l),o.xp6(7),o.Q6J("ngIf",e.newBookForm.controls.title.errors&&e.newBookForm.controls.title.touched),o.xp6(5),o.Q6J("ngIf",e.newBookForm.controls.title.errors&&e.newBookForm.controls.title.touched),o.xp6(18),o.Q6J("ngClass",e.coverImg&&"cover-preview--filled"),o.xp6(3),o.Q6J("src",e.coverImg,o.LSH)("alt",e.atlText),o.xp6(1),o.Q6J("disabled",!e.newBookForm.valid)}},dependencies:[p.mk,p.O5,s.rH,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,g.BN],styles:[".sr-only[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;position:absolute;white-space:nowrap;overflow:hidden;width:1px}.btn[_ngcontent-%COMP%], .btn--accent[_ngcontent-%COMP%], .btn--primary[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;background-color:#fff;border:1px solid;transition:all .2s ease}.btn--primary[_ngcontent-%COMP%]{border-color:#686364;color:#686364}.btn--primary[_ngcontent-%COMP%]:hover{background-color:#686364;color:#fff;border-color:#fff}.btn--accent[_ngcontent-%COMP%]{border-color:#d11509;color:#d11509}.btn--accent[_ngcontent-%COMP%]:hover{background-color:#d11509;color:#fff;border-color:#fff}.cover-preview[_ngcontent-%COMP%]{width:180px;height:180px;background:#686364;position:relative}.cover-preview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;text-align:center;color:#fff;font-weight:400}.cover-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;max-width:100%;margin:auto;height:100%;position:relative}.cover-preview--filled[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.form__control[_ngcontent-%COMP%]   .form__control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:250px}.form__control[_ngcontent-%COMP%]   .ng-invalid.ng-touched[_ngcontent-%COMP%]{outline:2px solid #d11509}.form__control[_ngcontent-%COMP%]   .form__control--column[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:none}.form__submit[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly}.go-back[_ngcontent-%COMP%]{position:absolute;left:0%}"]}),c})();const x=function(n){return["..","edit",n]};function w(n,c){if(1&n&&(o.TgZ(0,"div",1)(1,"a",2)(2,"span",3),o._uU(3,"Go to home"),o.qZA(),o._UZ(4,"fa-icon",4),o.qZA(),o.TgZ(5,"div")(6,"h2",5),o._uU(7),o.qZA(),o.TgZ(8,"p",6),o._uU(9),o.qZA()(),o.TgZ(10,"div",7),o._UZ(11,"img",8),o.qZA(),o.TgZ(12,"div",9)(13,"div")(14,"h3"),o._uU(15,"Pages"),o.qZA(),o.TgZ(16,"p"),o._uU(17),o.qZA()(),o.TgZ(18,"div")(19,"h3"),o._uU(20,"Year"),o.qZA(),o.TgZ(21,"p"),o._uU(22),o.qZA()()(),o.TgZ(23,"p",10),o._uU(24),o.qZA(),o.TgZ(25,"div",11)(26,"a",12),o._uU(27,"Edit Book"),o.qZA(),o.TgZ(28,"button",13),o._uU(29,"Delete Book"),o.qZA()()()),2&n){const r=c.ngIf,t=o.oxw();o.xp6(4),o.Q6J("icon",t.leftIcon),o.xp6(3),o.Oqu(r.title),o.xp6(2),o.Oqu(r.author),o.xp6(2),o.Q6J("src",r.imageUrl,o.LSH)("alt",r.title+" cover"),o.xp6(6),o.Oqu(r.pages),o.xp6(5),o.Oqu(r.pubblicationYear),o.xp6(2),o.Oqu(r.description),o.xp6(2),o.Q6J("routerLink",o.VKq(9,x,r.id))}}const O=[{path:"",component:h},{path:":id",component:(()=>{var n;class c{constructor(t,e){this._route=t,this.bookService=e,this.bookId=new u.X(""),this.book=new u.X(null),this.leftIcon=m.acZ,this._route.params.subscribe(l=>this.bookId.next(l.id))}ngOnInit(){var t=this;this.bookService.initBookService().then(()=>{var e;this.bookId.subscribe(function(l){return(e=e||(0,d.Z)(function*(b){t.book.next(yield t.bookService.findBook(b))})).apply(this,arguments)})})}}return(n=c).\u0275fac=function(t){return new(t||n)(o.Y36(s.gz),o.Y36(_.Z))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-book-detail"]],decls:2,vars:3,consts:[["class","book",4,"ngIf"],[1,"book"],["routerLink","",1,"go-back","btn","btn--primary"],[1,"sr-only"],[3,"icon"],[1,"book__title"],[1,"book__author"],[1,"book__cover"],[3,"src","alt"],[1,"book__info"],[1,"book__description"],[1,"book__actions"],[1,"btn","btn--primary",3,"routerLink"],[1,"btn","btn--accent"]],template:function(t,e){1&t&&(o.YNc(0,w,30,11,"div",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,e.book))},dependencies:[p.O5,s.rH,g.BN,p.Ov],styles:[".sr-only[_ngcontent-%COMP%]{clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;position:absolute;white-space:nowrap;overflow:hidden;width:1px}.btn[_ngcontent-%COMP%], .btn--accent[_ngcontent-%COMP%], .btn--primary[_ngcontent-%COMP%]{padding:8px 16px;border-radius:8px;background-color:#fff;border:1px solid;transition:all .2s ease}.btn--primary[_ngcontent-%COMP%]{border-color:#686364;color:#686364}.btn--primary[_ngcontent-%COMP%]:hover{background-color:#686364;color:#fff;border-color:#fff}.btn--accent[_ngcontent-%COMP%]{border-color:#d11509;color:#d11509}.btn--accent[_ngcontent-%COMP%]:hover{background-color:#d11509;color:#fff;border-color:#fff}.book[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;position:relative}.book__title[_ngcontent-%COMP%]{font-size:28px;width:75vw}.book__author[_ngcontent-%COMP%]{font-size:20px;font-style:italic}.book__title[_ngcontent-%COMP%], .book__author[_ngcontent-%COMP%]{text-align:center}.book__cover[_ngcontent-%COMP%]{max-width:60%}.book__cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40vw}.book__info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:50vw;display:flex;justify-content:space-evenly;margin-bottom:8px;align-items:center}.book__description[_ngcontent-%COMP%]{padding:8px;border:1px solid white;border-radius:5px;box-shadow:#32325d40 0 -20px 50px -20px,#0000004d 0 30px 60px -30px;line-height:1.5;text-align:justify}.book__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%}.go-back[_ngcontent-%COMP%]{position:absolute;left:0%}"]}),c})()},{path:"edit/:id",component:h,data:{}}];let y=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[s.Bz.forChild(O),s.Bz]}),c})(),M=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[p.ez,y,i.UX,g.uH]}),c})()}}]);